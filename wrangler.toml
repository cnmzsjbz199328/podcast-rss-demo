name = "podcast-rss-demo"
main = "worker.js"
# Enable Node.js built-in compatibility so modules like fs/path/http can be bundled
compatibility_flags = ["nodejs_compat"]
# Set a compatibility date (use the runtime's latest supported date or one >= 2024-09-23)
compatibility_date = "2025-10-11"

# Cloudflare account configuration
# Replace with your actual Cloudflare account ID
account_id = "e5bb181bf10eddf30de93f35885a5479"

# R2 存储绑定 - 用于存储音频文件
[[r2_buckets]]
binding = "PODCAST_BUCKET"  # Worker 中访问的变量名
bucket_name = "podcast-files"  # R2 bucket 名称

# D1 数据库绑定 - 用于存储Podcast元数据
[[d1_databases]]
binding = "DB"  # Worker 中访问的变量名
database_name = "podcast-database"  # D1 数据库名称
database_id = "35f75221-6253-4202-8aa7-a285a29432fb"  # ✅ 已配置

# Environment variables
[vars]
BBC_RSS_URL = "https://feeds.bbci.co.uk/news/rss.xml"
NODE_ENV = "production"
CLOUDFLARE_ACCOUNT_ID = "e5bb181bf10eddf30de93f35885a5479"
# R2 公网访问 URL (用于生成音频文件的公网链接)
R2_BASE_URL = "https://pub-d5b744245f574abcac229cefccabaa2f.r2.dev"
# TTS Provider: 'kokoro' (default), 'indextts', 'e2f5'
TTS_PROVIDER = "kokoro"
# Kokoro TTS Configuration
KOKORO_SPEED = "1.0"
# E2-F5 TTS Configuration
E2F5_REF_AUDIO_URL = "https://pub-b436254f85684e9e95bebad4567b11ff.r2.dev/voice/audio.wav"
E2F5_REF_TEXT = "Her wistful face haunts my dreams like the rain at night."
E2F5_REMOVE_SILENCE = "true"
# 可选：自定义域名 (初始化完成后取消注释)
# R2_BASE_URL = "https://podcast.badtom.dpdns.org"

# Cron Triggers - 定时任务
# 阿德莱德时区：每天早上0点和下午0点自动生成NewsPodcast
# 阿德莱德时区 = UTC+9:30
[triggers]
crons = ["30 14 * * *", "30 0 * * *", "0 * * * *"]
